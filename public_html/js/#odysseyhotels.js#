/**
 * @author guru
 */

 $(document).ready(function() {

/*	$(document).bind('contextmenu', function(e) {
		return false
	});
*/
	 
	$("#hotels").hide();
	$("#places").hide();
	$("#otheroptions").hide();
	
	var current = 'defaulthotel';
	
	$("#tabs a").click(function() {
		var clicked = $(this).attr("title");
		if (clicked == current) {
			return false;
		}
		else {
			$("a[title=" + current + "]").parent("li").removeClass("selected");
			$("#" + current).hide();
			$("a[title=" + clicked + "]").parent("li").addClass("selected");
			$("#" + clicked).show();
			current = clicked;
			return false;
		}
	});

	var currentHotelId = $('#frameslideshow').attr('thishotel');
	var totalSlideCount = $('#frameslideshow').attr('maxhotelimages')

	$('#frameslideshow').cycle({ 
		fx:      'fade', 
		timeout:  5000,
		before:   onBefore 
	}); 
 
	function onBefore(curr, next, opts) { 
		// on the first pass, addSlide is undefined (plugin hasn't yet created the fn); 
		// when we're finshed adding slides we'll null it out again

		if (!opts.addSlide) 
			return; 

		// on Before arguments: 
		//  curr == DOM element for the slide that is currently being displayed 
		//  next == DOM element for the slide that is about to be displayed 
		//  opts == slideshow options 

		var currentImageNum = parseInt(next.alt);  

		if (currentImageNum == totalSlideCount) { 
            // final slide in our slide slideshow is about to be displayed 
			// so there are no more to fetch 
            opts.addSlide = null; 
			return; 
		} 

		var imgName = '<img src="images/hotel_' + (currentHotelId) + '_large_' + (currentImageNum+1) + '.jpg" width="560" height="340" alt="' + (currentImageNum+1) + '" />'; 

		// add our next slide 
        opts.addSlide(imgName); 
    };
	
	$("a#showmoreopts").click(function() {
		$("#otheroptions").toggle('slow');
		return false;
	});

	var lat = $('#map_canvas').attr('lat');
	var lng = $('#map_canvas').attr('lng');

//	if (GBrowserIsCompatible()) {
//		var map = new GMap2(document.getElementById("map_canvas"));
//
//		var city =  new GLatLng(lat, lng);
//		var marker = new GMarker(city);
//		
//		map.addControl(new GSmallMapControl());
//		map.setCenter(city, 7);
//		map.addOverlay(marker);
//		map.setUIToDefault();
	}
})


//$(document.body).unload(function() {
//	if (GBrowserIsCompatible()) {
//		GUnload();
//	}
//})
